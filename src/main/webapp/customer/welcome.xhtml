<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="jakarta.faces.core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    template="/WEB-INF/templates/template.xhtml">
    <f:metadata>
        <f:viewAction action="#{customerController.loadCustomer}"/>
    </f:metadata>

  <ui:define name="title">Customer Dashboard</ui:define>

  <ui:define name="content">
  <h2>Welcome, #{customerController.customer.name}!</h2>
  <p>Email: #{customerController.customer.email}</p>
  <hr/>

  <h3>Your Insurance Policies</h3>
  <h:form id="policyListForm">
    <h:dataTable value="#{customerController.customer.policies}"
                 var="pol"
                 styleClass="table table-striped table-hover">

      <h:column>
        <f:facet name="header">Policy ID</f:facet>
        <h:outputText value="#{pol.policyId}"/>
      </h:column>
      <h:column>
        <f:facet name="header">Coverage Amount</f:facet>
        <h:outputText value="#{pol.coverageAmount}"/>
      </h:column>
      <h:column>
        <f:facet name="header">Start Date</f:facet>
        <h:outputText value="#{pol.startDate}"/>
      </h:column>
      <h:column>
        <f:facet name="header">End Date</f:facet>
        <h:outputText value="#{pol.endDate}"/>
      </h:column>
      <h:column>
        <f:facet name="header">Policy Type</f:facet>
        <h:outputText value="#{pol.policyType}"/>
      </h:column>

    </h:dataTable>
  </h:form>
</ui:define>
</ui:composition>